# Talespin

Talespin is an AI RPG with intended goal of telling an interactive story.

The program itself is a chat-like, text interface with some additional tools.

The application should allow for the selection of a hero, one or more characters, and allow the user to write the entrypoint for the story.

The game begins with the entrypoint and the chat interface.


### Desired Features

Speaking to a character will get their attention, but the player can also use the controls on the screen to manually select a character to interact with. The player can also use a set of controls to determine if the character is in earshot of the conversation - (this may prevent the other character from responding to a question or mention of their name.)

At any time, the player can request a scene change, where they are presented with a dialog box asking them to describe the new scene. They may also select the charaters that are in the new scene, or create new charaters for the scene.


# AI Prompt

The AI prompt will have the following structure for the system prompt:

```

INSTRUCTIONS
---

ACTIVE CHARACTER DESCRIPTION
---

HERO DESCRIPTION
---

LOCATION DESCRIPTION
---

LONG TERM SYNOPSIS
---

SHORT TERM SYNOPSIS
---

LAST 10 MESSAGES
---


NEXT MESSAGE INSTRUCTION
---

> SCENE WRITING INSTRUCTIONS
> OOC: What will happen next


```

The AI Prompt is generated by the AiPrompt class.





# Data

Each "tale" has the following structure:

```js
//tale:
{
  hero: {
    "HeroId": {}  // 'live' hero object
  }
  characters: {
    "CharacterId": {}  // 'live' character object
  },
  locations: {
    "LocationId": {}  // 'live' location object
  },
  instructions: "...system instructions",
  longterm: [],     // synopsis - per scene change (front-loaded)
  shortterm: [],    // synopsis - per 15 messages
  messages: []      // entire chat log

}
```

* Heroes can be saved to the Heroes Collection
* Characters can be saved to the Characters Collection



# Stored Data

We will be using indexedDb, and there will be object stores for:

* **heroes** - (user personas)
* **characters** - (character personas)
* **locations** - (location descriptions)
* **instructions** - (system instructions. 1-3 entries)
* **scenarios** - (storylines to start a game or scene)
* **tales** - (the game file)

